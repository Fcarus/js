<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=h, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style/global.css">
    <style>
        #mybutton{width: 945px;height: auto;text-align: center;margin: 0 auto;margin-top: 40px;}
        #mydesk{position: relative;width: 945px;height: 229px;background: #fff;border: 10px solid  transparent;margin: 0 auto;margin-top: 40px;}
        #mydesk img{position: absolute;top: 0;left: 0;cursor: pointer;}
        #mypoint{width: 945px;height: auto;text-align: center;font-size: 100px;margin: 10 auto;margin-top: 50px;}
    </style>
    <script>
        var mytimer;
        var mypoint;
        function layout(){
            mypoint=0;
            document.getElementById("mypoint").innerHTML=mypoint;
            document.getElementById("mydesk").innerHTML="";
            clearInterval(mytimer);

            var arrp=new Array;
            for(var a=0;a<=53;a++){
                arrp[a]=Math.round(Math.random()*53);
                for(var n=0;n<arrp.length;n++){
                    if(arrp[n]==arrp[a] &&n!=a){
                        a--;
                        break;
                   }
                }
            }

            var a=0;
            mytimer=setInterval(function(){
                document.getElementById("mydesk").innerHTML+="<img id='pk_"+arrp[a]+"' src='image/pkback.png' style='left:" +(a*15)+"px;' onclick='select(this)' />"
                a++;
                if(a>53) clearInterval(mytimer);
                

            },1000/27);
        }
        function select(obj){
                if(mypoint>21) return;
                obj.style.top=-20+"px";
                obj.src="image/"+obj.id+".jpg";


                var b=obj.id.substr(3)*1;
                if(b==0||b>40){
                     b=1
                  }else{
                    if(b%10==0){
                         b=10;
                      }else{
                         b=b%10;
                       }
                     }
                      mypoint+=b;
                      document.getElementById("mypoint").innerHTML=mypoint;
                      if(mypoint>21){
                          alert("游戏结束")
                     }

            }
            

    </script>
</head>
<body>
    <div id="mybutton" ><span class="button but2" onclick="layout()">开始发牌</span></div>
    <div id="mydesk" ></div>
    <div id="mypoint"></div>
</html>